!function(u){u.module("angular-khorzu-utils.config",[]).value("angular-khorzu-utils.config",{debug:!0}),u.module("angular-khorzu-utils.directives",[]),u.module("angular-khorzu-utils.filters",[]),u.module("angular-khorzu-utils.services",["angularLocalStorage","ngMaterial"]),u.module("angular-khorzu-utils.controllers",[]),u.module("angular-khorzu-utils",["angular-khorzu-utils.config","angular-khorzu-utils.directives","angular-khorzu-utils.filters","angular-khorzu-utils.services","angular-khorzu-utils.controllers"])}(angular),function(){"use strict";var u={api_url:document.getElementById("api_url").getAttribute("value"),login_route:"auth/login",login_state:"login"};angular.module("angular-khorzu-utils").service("backend",function(t,e,l,o,r,a,n,s){return u.call=function(e,l,a,n,s){return r({method:l,data:a,url:u.api_url+""+e,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:t.user?t.user.token:null}}).success(function(){s!=-1&&o(function(){u.toast(s?s:"درخواست شما با موفقیت انجام شد.","success",2e3)},500)}).error(function(t,e,l,o){var r=n?n[e]:null;if(!r)switch(e){case-1:r="متاسفانه تلاش برای اتصال به سرور موفقیت آمیز نبود !";break;case 422:r="لطفا اطلاعات درخواست شده را به صورت صحیح وارد کنید.";break;case 401:r="دسترسی شما به این قسمت مورد تایید نمی باشد.",u.logout();break;case 500:r="متاسفانه سرور دچار اشکال شده !";break;default:r="خطای "+e}console.error(r),u.toast(r,"error")})},s.bind(t,"user"),u.login=function(e,l){return u.call(u.login_route,"POST",e,{401:"نام کاربری یا رمز عبور اشتباه است !"},"سلام؛ خوش آمدید !").success(function(u){t.user=l?u[l]:u})},u.logout=function(){return t.user=null,e.go(u.login_state),l.resolve()},u.toast=function(u,t,e){e=e?e:5e3,a.show({template:'<md-toast class="'+t+'"><span flex>'+u+"</span></md-toast>",position:"top left",hideDelay:e})},u.alert=function(u,t,e){n.show(n.alert().title(t?t:"اطلاع").textContent(u).ok(e?e:"خُب"))},u})}();