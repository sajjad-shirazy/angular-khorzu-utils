!function(t){t.module("angular-khorzu-utils.config",[]).value("angular-khorzu-utils.config",{debug:!0}),t.module("angular-khorzu-utils.directives",["ngMaterial"]),t.module("angular-khorzu-utils.filters",[]),t.module("angular-khorzu-utils.services",["angularLocalStorage","ngMaterial","angular-jwt"]),t.module("angular-khorzu-utils.controllers",[]),t.module("angular-khorzu-utils",["angular-khorzu-utils.config","angular-khorzu-utils.directives","angular-khorzu-utils.filters","angular-khorzu-utils.services","angular-khorzu-utils.controllers"])}(angular),angular.module("angular-khorzu-utils.directives").run(["$templateCache",function(t){t.put("angular-khorzu-utils/directives/loading.tpl.html",'<div class="overally" ng-show="show" layout="" layout-fill="" layout-align="center center" aria-hidden="true" style="">\r\n    <div class="" aria-hidden="true" style="">\r\n        <md-progress-circular md-mode="indeterminate" md-diameter="96"></md-progress-circular>\r\n    </div>\r\n</div>\r\n<ng-transclude></ng-transclude>\r\n')}]),function(){"use strict";function t(t,e){}t.$inject=["$element","$scope"],angular.module("angular-khorzu-utils.directives").directive("kLoading",function(){return{restrict:"A",replace:!1,transclude:!0,templateUrl:"angular-khorzu-utils/directives/loading.tpl.html",controller:t,scope:{show:"=kLoading"}}})}(),function(){"use strict";function t(t,e,r){e.redirectWhenUnauthenticated(),r.bind(t,"token")}function e(t,e){e.config({authPrefix:"",tokenGetter:function(){return localStorage.getItem("token")},unauthenticatedRedirector:["khorzu",function(t){t.logout()}]})}function r(t,e,r,o,u,a,i,l){return n.jwtRequest=function(e,r,a,i,l){return u({method:r,data:a,url:n.configs.api_url+""+e,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:t.token}}).success(function(){l!=-1&&o(function(){n.toast(l?l:"درخواست شما با موفقیت انجام شد.","success",2e3)},500)}).error(function(t,e,r,o){var u=i?i[e]:null;if(!u)switch(e){case-1:u="متاسفانه تلاش برای اتصال به سرور موفقیت آمیز نبود !";break;case 422:u="لطفا اطلاعات درخواست شده را به صورت صحیح وارد کنید.";break;case 401:u="دسترسی شما به این قسمت مورد تایید نمی باشد.",n.logout();break;case 500:u="متاسفانه سرور دچار اشکال شده !";break;default:u="خطای "+e}console.error(u),n.toast(u,"error")})},n.login=function(e){return n.jwtRequest(n.configs.login_route,"POST",e,{401:"نام کاربری یا رمز عبور اشتباه است !"},"سلام؛ خوش آمدید !").success(function(e){t.token=e})},n.logout=function(){return t.user=null,e.go(n.configs.login_state),r.resolve()},n.toast=function(t,e,r){r=r?r:5e3,a.show({template:'<md-toast class="'+e+'"><span flex>'+t+"</span></md-toast>",position:"top left",hideDelay:r})},n.alert=function(t,e,r){i.show(i.alert({preserveScope:!0,autoWrap:!0,skipHide:!0}).title(e?e:"اطلاع").textContent(t).ok(r?r:"خُب"))},n}t.$inject=["$rootScope","authManager","storage"],e.$inject=["$httpProvider","jwtOptionsProvider"],r.$inject=["$rootScope","$state","$q","$timeout","$http","$mdToast","$mdDialog","jwtHelper"];var n={configs:{api_url:document.getElementById("api_url").getAttribute("value"),login_route:"user/login",login_state:"login"}};angular.module("angular-khorzu-utils.services").config(e).service("khorzu",r).run(t)}();