!function(u){u.module("angular-khorzu-utils.config",[]).value("angular-khorzu-utils.config",{debug:!0}),u.module("angular-khorzu-utils.directives",[]),u.module("angular-khorzu-utils.filters",[]),u.module("angular-khorzu-utils.services",["angularLocalStorage","ngMaterial"]),u.module("angular-khorzu-utils.controllers",[]),u.module("angular-khorzu-utils",["angular-khorzu-utils.config","angular-khorzu-utils.directives","angular-khorzu-utils.filters","angular-khorzu-utils.services","angular-khorzu-utils.controllers"])}(angular),function(){"use strict";var u={login_state:"login"},r=$("#api_url").attr("value");angular.module("angular-khorzu-utils").service("backend",function(o,t,n,e,l,a,s,i){return u.call=function(t,n,a,s,i){return l({method:n,data:a,url:r+""+t,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:o.user?o.user.token:null}}).success(function(){i!=-1&&e(function(){u.toast(i?i:"درخواست شما با موفقیت انجام شد.","success",2e3)},500)}).error(function(r,o,t,n){var e=s?s[o]:null;if(!e)switch(o){case-1:e="متاسفانه تلاش برای اتصال به سرور موفقیت آمیز نبود !";break;case 422:e="لطفا اطلاعات درخواست شده را به صورت صحیح وارد کنید.";break;case 401:e="دسترسی شما به این قسمت مورد تایید نمی باشد.",u.logout();break;case 500:e="متاسفانه سرور دچار اشکال شده !";break;default:e="خطای "+o}console.error(e),u.toast(e,"error")})},i.bind(o,"user"),u.login=function(u,r){return call("auth/login","POST",u,{401:"نام کاربری یا رمز عبور اشتباه است !"},"سلام؛ خوش آمدید !").success(function(u){o.user=r?u[r]:u})},u.logout=function(){return o.user=null,t.go(u.login_state),n.resolve()},u.toast=function(u,r,o){o=o?o:5e3,a.show(a.simple().textContent(u).position("top left").hideDelay(o))},u.now=function(u){return moment().format(u?u:"jD jMMMM jYYYY ساعت HH:mm:ss")},u})}();